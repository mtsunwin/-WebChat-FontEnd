'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

var _uiBox = require('ui-box');

var _uiBox2 = _interopRequireDefault(_uiBox);

var _elevationStyles = require('./styles/elevation-styles');

var _elevationStyles2 = _interopRequireDefault(_elevationStyles);

var _borderColors = require('./styles/border-colors');

var _borderColors2 = _interopRequireDefault(_borderColors);

var _layerAppearances = require('./styles/layer-appearances');

var _layerAppearances2 = _interopRequireDefault(_layerAppearances);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var ElevationPropType = _propTypes2.default.oneOf(_elevationStyles2.default.map(function (_, index) {
  return index;
}));

var StringAndBoolPropType = _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.bool]);

var Pane = function (_PureComponent) {
  _inherits(Pane, _PureComponent);

  function Pane() {
    _classCallCheck(this, Pane);

    return _possibleConstructorReturn(this, (Pane.__proto__ || Object.getPrototypeOf(Pane)).apply(this, arguments));
  }

  _createClass(Pane, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          appearance = _props.appearance,
          elevation = _props.elevation,
          hoverElevation = _props.hoverElevation,
          activeElevation = _props.activeElevation,
          border = _props.border,
          borderTop = _props.borderTop,
          borderRight = _props.borderRight,
          borderBottom = _props.borderBottom,
          borderLeft = _props.borderLeft,
          _props$css = _props.css,
          css = _props$css === undefined ? {} : _props$css,
          props = _objectWithoutProperties(_props, ['appearance', 'elevation', 'hoverElevation', 'activeElevation', 'border', 'borderTop', 'borderRight', 'borderBottom', 'borderLeft', 'css']);

      var appearanceStyle = {};
      if (Object.prototype.hasOwnProperty.call(_layerAppearances2.default, appearance)) {
        appearanceStyle = _layerAppearances2.default[appearance];
      }

      var elevationStyle = void 0;
      if (Number.isInteger(elevation)) {
        elevationStyle = _elevationStyles2.default[elevation];
      }

      var hoverElevationStyle = {};
      if (Number.isInteger(hoverElevation)) {
        hoverElevationStyle = {
          transitionDuration: '150ms',
          transitionProperty: 'box-shadow, transform',
          transitionTimingFunction: 'cubic-bezier(0.0, 0.0, 0.2, 1)',
          ':hover': _extends({}, css[':hover'] || {}, {
            transform: 'translateY(-2px)',
            boxShadow: _elevationStyles2.default[hoverElevation]
          })
        };
      }

      var activeElevationStyle = {};
      if (Number.isInteger(activeElevation)) {
        activeElevationStyle = {
          ':active': _extends({}, css[':active'] || {}, {
            transform: 'translateY(-1px)',
            boxShadow: _elevationStyles2.default[activeElevation]
          })
        };
      }

      var _map = [borderTop, borderRight, borderBottom, borderLeft].map(function (borderSideProperty) {
        if (Object.prototype.hasOwnProperty.call(_borderColors2.default, borderSideProperty)) {
          return '1px solid ' + _borderColors2.default[borderSideProperty];
        } else if (borderSideProperty === true) {
          // Use default, which is now muted, border color when explicitly a true boolean
          return '1px solid ' + _borderColors2.default.muted;
        } else if (Object.prototype.hasOwnProperty.call(_borderColors2.default, border)) {
          return '1px solid ' + _borderColors2.default[border];
        } else if (border === true) {
          return '1px solid ' + _borderColors2.default.muted;
        }

        return borderSideProperty;
      }),
          _map2 = _slicedToArray(_map, 4),
          _borderTop = _map2[0],
          _borderRight = _map2[1],
          _borderBottom = _map2[2],
          _borderLeft = _map2[3];

      return _react2.default.createElement(_uiBox2.default, _extends({
        borderTop: _borderTop,
        borderRight: _borderRight,
        borderBottom: _borderBottom,
        borderLeft: _borderLeft,
        boxShadow: elevationStyle
      }, appearanceStyle, {
        css: _extends({}, css, hoverElevationStyle, activeElevationStyle)
      }, props));
    }
  }]);

  return Pane;
}(_react.PureComponent);

Pane.propTypes = _extends({}, _uiBox2.default.propTypes, {

  /**
   * The appearance of the Pane.
   * Values: tint1, tint2, tint3, selected, dark.
   */
  appearance: _propTypes2.default.oneOf(Object.keys(_layerAppearances2.default)),

  /**
   * Elevation of the Pane.
   * Values: 0, 1, 2, 3, 4.
   */
  elevation: ElevationPropType,

  /**
   * Elevation of the Pane on hover. Might get deprecated.
   * Values: 0, 1, 2, 3, 4.
   */
  hoverElevation: ElevationPropType,

  /**
   * Elevation of the Pane on click. Might get deprecated.
   * Values: 0, 1, 2, 3, 4.
   */
  activeElevation: ElevationPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  border: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderTop: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderRight: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderBottom: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderLeft: StringAndBoolPropType
});
exports.default = Pane;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9sYXllcnMvc3JjL1BhbmUuanMiXSwibmFtZXMiOlsiRWxldmF0aW9uUHJvcFR5cGUiLCJvbmVPZiIsIm1hcCIsIl8iLCJpbmRleCIsIlN0cmluZ0FuZEJvb2xQcm9wVHlwZSIsIm9uZU9mVHlwZSIsInN0cmluZyIsImJvb2wiLCJQYW5lIiwicHJvcHMiLCJhcHBlYXJhbmNlIiwiZWxldmF0aW9uIiwiaG92ZXJFbGV2YXRpb24iLCJhY3RpdmVFbGV2YXRpb24iLCJib3JkZXIiLCJib3JkZXJUb3AiLCJib3JkZXJSaWdodCIsImJvcmRlckJvdHRvbSIsImJvcmRlckxlZnQiLCJjc3MiLCJhcHBlYXJhbmNlU3R5bGUiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJlbGV2YXRpb25TdHlsZSIsIk51bWJlciIsImlzSW50ZWdlciIsImhvdmVyRWxldmF0aW9uU3R5bGUiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJ0cmFuc2l0aW9uUHJvcGVydHkiLCJ0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24iLCJ0cmFuc2Zvcm0iLCJib3hTaGFkb3ciLCJhY3RpdmVFbGV2YXRpb25TdHlsZSIsImJvcmRlclNpZGVQcm9wZXJ0eSIsIm11dGVkIiwiX2JvcmRlclRvcCIsIl9ib3JkZXJSaWdodCIsIl9ib3JkZXJCb3R0b20iLCJfYm9yZGVyTGVmdCIsInByb3BUeXBlcyIsImtleXMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNQSxvQkFBb0Isb0JBQVVDLEtBQVYsQ0FDeEIsMEJBQWdCQyxHQUFoQixDQUFvQixVQUFDQyxDQUFELEVBQUlDLEtBQUo7QUFBQSxTQUFjQSxLQUFkO0FBQUEsQ0FBcEIsQ0FEd0IsQ0FBMUI7O0FBSUEsSUFBTUMsd0JBQXdCLG9CQUFVQyxTQUFWLENBQW9CLENBQ2hELG9C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ekIsS0FaTixFQURGO0FBZ0JEOzs7Ozs7QUF6SmtCRCxJLENBQ1ppQyxTLGdCQUlGLGdCQUFJQSxTOztBQUVQOzs7O0FBSUEvQixjQUFZLG9CQUFVVixLQUFWLENBQWdCcUIsT0FBT3FCLElBQVAsNEJBQWhCLEM7O0FBRVo7Ozs7QUFJQS9CLGFBQVdaLGlCOztBQUVYOzs7O0FBSUFhLGtCQUFnQmIsaUI7O0FBRWhCOzs7O0FBSUFjLG1CQUFpQmQsaUI7O0FBRWpCOzs7O0FBSUFlLFVBQVFWLHFCOztBQUVSOzs7O0FBSUFXLGFBQVdYLHFCOztBQUVYOzs7O0FBSUFZLGVBQWFaLHFCOztBQUViOzs7O0FBSUFhLGdCQUFjYixxQjs7QUFFZDs7OztBQUlBYyxjQUFZZDs7a0JBM0RLSSxJIiwiZmlsZSI6IlBhbmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xuaW1wb3J0IEJveCBmcm9tICd1aS1ib3gnXG5pbXBvcnQgRWxldmF0aW9uU3R5bGVzIGZyb20gJy4vc3R5bGVzL2VsZXZhdGlvbi1zdHlsZXMnXG5pbXBvcnQgQm9yZGVyQ29sb3JzIGZyb20gJy4vc3R5bGVzL2JvcmRlci1jb2xvcnMnXG5pbXBvcnQgTGF5ZXJBcHBlYXJhbmNlcyBmcm9tICcuL3N0eWxlcy9sYXllci1hcHBlYXJhbmNlcydcblxuY29uc3QgRWxldmF0aW9uUHJvcFR5cGUgPSBQcm9wVHlwZXMub25lT2YoXG4gIEVsZXZhdGlvblN0eWxlcy5tYXAoKF8sIGluZGV4KSA9PiBpbmRleClcbilcblxuY29uc3QgU3RyaW5nQW5kQm9vbFByb3BUeXBlID0gUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gIFByb3BUeXBlcy5zdHJpbmcsXG4gIFByb3BUeXBlcy5ib29sXG5dKVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYW5lIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLyoqXG4gICAgICogQ29tcG9zZXMgdGhlIEJveCBjb21wb25lbnQgYXMgdGhlIGJhc2UuXG4gICAgICovXG4gICAgLi4uQm94LnByb3BUeXBlcyxcblxuICAgIC8qKlxuICAgICAqIFRoZSBhcHBlYXJhbmNlIG9mIHRoZSBQYW5lLlxuICAgICAqIFZhbHVlczogdGludDEsIHRpbnQyLCB0aW50Mywgc2VsZWN0ZWQsIGRhcmsuXG4gICAgICovXG4gICAgYXBwZWFyYW5jZTogUHJvcFR5cGVzLm9uZU9mKE9iamVjdC5rZXlzKExheWVyQXBwZWFyYW5jZXMpKSxcblxuICAgIC8qKlxuICAgICAqIEVsZXZhdGlvbiBvZiB0aGUgUGFuZS5cbiAgICAgKiBWYWx1ZXM6IDAsIDEsIDIsIDMsIDQuXG4gICAgICovXG4gICAgZWxldmF0aW9uOiBFbGV2YXRpb25Qcm9wVHlwZSxcblxuICAgIC8qKlxuICAgICAqIEVsZXZhdGlvbiBvZiB0aGUgUGFuZSBvbiBob3Zlci4gTWlnaHQgZ2V0IGRlcHJlY2F0ZWQuXG4gICAgICogVmFsdWVzOiAwLCAxLCAyLCAzLCA0LlxuICAgICAqL1xuICAgIGhvdmVyRWxldmF0aW9uOiBFbGV2YXRpb25Qcm9wVHlwZSxcblxuICAgIC8qKlxuICAgICAqIEVsZXZhdGlvbiBvZiB0aGUgUGFuZSBvbiBjbGljay4gTWlnaHQgZ2V0IGRlcHJlY2F0ZWQuXG4gICAgICogVmFsdWVzOiAwLCAxLCAyLCAzLCA0LlxuICAgICAqL1xuICAgIGFjdGl2ZUVsZXZhdGlvbjogRWxldmF0aW9uUHJvcFR5cGUsXG5cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgYSBleHBsaWNpdCBib3JkZXIgdmFsdWUgb3IgYSBib29sZWFuLlxuICAgICAqIFZhbHVlczogdHJ1ZSwgZXh0cmFNdXRlZCwgbXV0ZWQsIGRlZmF1bHQuXG4gICAgICovXG4gICAgYm9yZGVyOiBTdHJpbmdBbmRCb29sUHJvcFR5cGUsXG5cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgYSBleHBsaWNpdCBib3JkZXIgdmFsdWUgb3IgYSBib29sZWFuLlxuICAgICAqIFZhbHVlczogdHJ1ZSwgZXh0cmFNdXRlZCwgbXV0ZWQsIGRlZmF1bHQuXG4gICAgICovXG4gICAgYm9yZGVyVG9wOiBTdHJpbmdBbmRCb29sUHJvcFR5cGUsXG5cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgYSBleHBsaWNpdCBib3JkZXIgdmFsdWUgb3IgYSBib29sZWFuLlxuICAgICAqIFZhbHVlczogdHJ1ZSwgZXh0cmFNdXRlZCwgbXV0ZWQsIGRlZmF1bHQuXG4gICAgICovXG4gICAgYm9yZGVyUmlnaHQ6IFN0cmluZ0FuZEJvb2xQcm9wVHlwZSxcblxuICAgIC8qKlxuICAgICAqIENhbiBiZSBhIGV4cGxpY2l0IGJvcmRlciB2YWx1ZSBvciBhIGJvb2xlYW4uXG4gICAgICogVmFsdWVzOiB0cnVlLCBleHRyYU11dGVkLCBtdXRlZCwgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBib3JkZXJCb3R0b206IFN0cmluZ0FuZEJvb2xQcm9wVHlwZSxcblxuICAgIC8qKlxuICAgICAqIENhbiBiZSBhIGV4cGxpY2l0IGJvcmRlciB2YWx1ZSBvciBhIGJvb2xlYW4uXG4gICAgICogVmFsdWVzOiB0cnVlLCBleHRyYU11dGVkLCBtdXRlZCwgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBib3JkZXJMZWZ0OiBTdHJpbmdBbmRCb29sUHJvcFR5cGVcbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBhcHBlYXJhbmNlLFxuXG4gICAgICBlbGV2YXRpb24sXG4gICAgICBob3ZlckVsZXZhdGlvbixcbiAgICAgIGFjdGl2ZUVsZXZhdGlvbixcblxuICAgICAgYm9yZGVyLFxuICAgICAgYm9yZGVyVG9wLFxuICAgICAgYm9yZGVyUmlnaHQsXG4gICAgICBib3JkZXJCb3R0b20sXG4gICAgICBib3JkZXJMZWZ0LFxuXG4gICAgICBjc3MgPSB7fSxcbiAgICAgIC4uLnByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcblxuICAgIGxldCBhcHBlYXJhbmNlU3R5bGUgPSB7fVxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoTGF5ZXJBcHBlYXJhbmNlcywgYXBwZWFyYW5jZSkpIHtcbiAgICAgIGFwcGVhcmFuY2VTdHlsZSA9IExheWVyQXBwZWFyYW5jZXNbYXBwZWFyYW5jZV1cbiAgICB9XG5cbiAgICBsZXQgZWxldmF0aW9uU3R5bGVcbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihlbGV2YXRpb24pKSB7XG4gICAgICBlbGV2YXRpb25TdHlsZSA9IEVsZXZhdGlvblN0eWxlc1tlbGV2YXRpb25dXG4gICAgfVxuXG4gICAgbGV0IGhvdmVyRWxldmF0aW9uU3R5bGUgPSB7fVxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGhvdmVyRWxldmF0aW9uKSkge1xuICAgICAgaG92ZXJFbGV2YXRpb25TdHlsZSA9IHtcbiAgICAgICAgdHJhbnNpdGlvbkR1cmF0aW9uOiAnMTUwbXMnLFxuICAgICAgICB0cmFuc2l0aW9uUHJvcGVydHk6ICdib3gtc2hhZG93LCB0cmFuc2Zvcm0nLFxuICAgICAgICB0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb246IGBjdWJpYy1iZXppZXIoMC4wLCAwLjAsIDAuMiwgMSlgLFxuICAgICAgICAnOmhvdmVyJzoge1xuICAgICAgICAgIC4uLihjc3NbJzpob3ZlciddIHx8IHt9KSxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0ycHgpJyxcbiAgICAgICAgICBib3hTaGFkb3c6IEVsZXZhdGlvblN0eWxlc1tob3ZlckVsZXZhdGlvbl1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBhY3RpdmVFbGV2YXRpb25TdHlsZSA9IHt9XG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIoYWN0aXZlRWxldmF0aW9uKSkge1xuICAgICAgYWN0aXZlRWxldmF0aW9uU3R5bGUgPSB7XG4gICAgICAgICc6YWN0aXZlJzoge1xuICAgICAgICAgIC4uLihjc3NbJzphY3RpdmUnXSB8fCB7fSksXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgtMXB4KScsXG4gICAgICAgICAgYm94U2hhZG93OiBFbGV2YXRpb25TdHlsZXNbYWN0aXZlRWxldmF0aW9uXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgW19ib3JkZXJUb3AsIF9ib3JkZXJSaWdodCwgX2JvcmRlckJvdHRvbSwgX2JvcmRlckxlZnRdID0gW1xuICAgICAgYm9yZGVyVG9wLFxuICAgICAgYm9yZGVyUmlnaHQsXG4gICAgICBib3JkZXJCb3R0b20sXG4gICAgICBib3JkZXJMZWZ0XG4gICAgXS5tYXAoYm9yZGVyU2lkZVByb3BlcnR5ID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEJvcmRlckNvbG9ycywgYm9yZGVyU2lkZVByb3BlcnR5KVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBgMXB4IHNvbGlkICR7Qm9yZGVyQ29sb3JzW2JvcmRlclNpZGVQcm9wZXJ0eV19YFxuICAgICAgfSBlbHNlIGlmIChib3JkZXJTaWRlUHJvcGVydHkgPT09IHRydWUpIHtcbiAgICAgICAgLy8gVXNlIGRlZmF1bHQsIHdoaWNoIGlzIG5vdyBtdXRlZCwgYm9yZGVyIGNvbG9yIHdoZW4gZXhwbGljaXRseSBhIHRydWUgYm9vbGVhblxuICAgICAgICByZXR1cm4gYDFweCBzb2xpZCAke0JvcmRlckNvbG9ycy5tdXRlZH1gXG4gICAgICB9IGVsc2UgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChCb3JkZXJDb2xvcnMsIGJvcmRlcikpIHtcbiAgICAgICAgcmV0dXJuIGAxcHggc29saWQgJHtCb3JkZXJDb2xvcnNbYm9yZGVyXX1gXG4gICAgICB9IGVsc2UgaWYgKGJvcmRlciA9PT0gdHJ1ZSkge1xuICAgICAgICByZXR1cm4gYDFweCBzb2xpZCAke0JvcmRlckNvbG9ycy5tdXRlZH1gXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBib3JkZXJTaWRlUHJvcGVydHlcbiAgICB9KVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCb3hcbiAgICAgICAgYm9yZGVyVG9wPXtfYm9yZGVyVG9wfVxuICAgICAgICBib3JkZXJSaWdodD17X2JvcmRlclJpZ2h0fVxuICAgICAgICBib3JkZXJCb3R0b209e19ib3JkZXJCb3R0b219XG4gICAgICAgIGJvcmRlckxlZnQ9e19ib3JkZXJMZWZ0fVxuICAgICAgICBib3hTaGFkb3c9e2VsZXZhdGlvblN0eWxlfVxuICAgICAgICB7Li4uYXBwZWFyYW5jZVN0eWxlfVxuICAgICAgICBjc3M9e3tcbiAgICAgICAgICAuLi5jc3MsXG4gICAgICAgICAgLi4uaG92ZXJFbGV2YXRpb25TdHlsZSxcbiAgICAgICAgICAuLi5hY3RpdmVFbGV2YXRpb25TdHlsZVxuICAgICAgICB9fVxuICAgICAgICB7Li4ucHJvcHN9XG4gICAgICAvPlxuICAgIClcbiAgfVxufVxuIl19
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _propTypes = require('prop-types');

var _propTypes2 = _interopRequireDefault(_propTypes);

var _uiBox = require('ui-box');

var _uiBox2 = _interopRequireDefault(_uiBox);

var _image = require('../../image');

var _typography = require('../../typography');

var _sharedStyles = require('../../shared-styles');

var _colors = require('../../colors');

var _getInitials = require('./utils/getInitials');

var _getInitials2 = _interopRequireDefault(_getInitials);

var _hash = require('./utils/hash');

var _hash2 = _interopRequireDefault(_hash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var keysFillAppearances = Object.keys(_sharedStyles.FillAppearances.default);

var initialsProps = {
  top: 0,
  position: 'absolute',
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'center',
  lineHeight: 1
};

var getInitialsFontSize = function getInitialsFontSize(size, heightLimitOneCharacter) {
  if (size <= heightLimitOneCharacter) {
    return Math.ceil(size / 2.2);
  }
  return Math.ceil(size / 2.6);
};

var Avatar = function (_PureComponent) {
  _inherits(Avatar, _PureComponent);

  function Avatar(props, context) {
    _classCallCheck(this, Avatar);

    var _this = _possibleConstructorReturn(this, (Avatar.__proto__ || Object.getPrototypeOf(Avatar)).call(this, props, context));

    _this.handleError = function () {
      _this.setState({
        imageHasFailedLoading: true
      });
    };

    _this.state = {
      imageHasFailedLoading: false
    };
    return _this;
  }

  _createClass(Avatar, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          src = _props.src,
          size = _props.size,
          name = _props.name,
          hash = _props.hash,
          isSolid = _props.isSolid,
          propsHashValue = _props.hashValue,
          getInitials = _props.getInitials,
          useAutoColor = _props.useAutoColor,
          propsAppearance = _props.appearance,
          forceShowInitials = _props.forceShowInitials,
          heightLimitOneCharacter = _props.heightLimitOneCharacter,
          props = _objectWithoutProperties(_props, ['src', 'size', 'name', 'hash', 'isSolid', 'hashValue', 'getInitials', 'useAutoColor', 'appearance', 'forceShowInitials', 'heightLimitOneCharacter']);

      var imageHasFailedLoading = this.state.imageHasFailedLoading;

      var imageUnavailable = !src || imageHasFailedLoading;
      var initialsFontSize = getInitialsFontSize(size, heightLimitOneCharacter) + 'px';

      var initials = getInitials(name);
      if (size <= heightLimitOneCharacter) {
        initials = initials.substring(0, 1);
      }

      var hashValue = hash(propsHashValue || name);
      var appearanceKey = propsAppearance;
      if (appearanceKey === undefined) {
        appearanceKey = keysFillAppearances[hashValue % keysFillAppearances.length];
      }

      var appearance = _sharedStyles.FillAppearances[isSolid ? 'solid' : 'default'][appearanceKey];

      return _react2.default.createElement(
        _uiBox2.default,
        _extends({
          width: size,
          height: size,
          overflow: 'hidden',
          borderRadius: 9999,
          position: 'relative',
          display: 'inline-flex',
          justifyContent: 'center',
          backgroundColor: _colors.colors.neutral['300'],
          title: name
        }, appearance, props),
        (imageUnavailable || forceShowInitials) && _react2.default.createElement(
          _typography.Text,
          {
            css: initialsProps,
            fontSize: initialsFontSize,
            lineHeight: initialsFontSize,
            width: size,
            height: size,
            color: appearance.color
          },
          initials
        ),
        !imageUnavailable && _react2.default.createElement(_image.Image, {
          width: 'auto',
          height: '100%',
          src: src,
          onError: this.handleError
        })
      );
    }
  }]);

  return Avatar;
}(_react.PureComponent);

Avatar.propTypes = _extends({}, _image.Image.propTypes, {
  size: _propTypes2.default.number,
  name: _propTypes2.default.string,
  // Hash value defaults to name
  hashValue: _propTypes2.default.string,
  hash: _propTypes2.default.func,
  isSolid: _propTypes2.default.bool,
  appearance: _propTypes2.default.oneOf(keysFillAppearances),
  getInitials: _propTypes2.default.func,
  // In some cases Gravatar returns transparent pngs
  // we still want to see the initials
  forceShowInitials: _propTypes2.default.bool,
  heightLimitOneCharacter: _propTypes2.default.number
});
Avatar.defaultProps = {
  size: 24,
  hash: _hash2.default,
  isSolid: false,
  getInitials: _getInitials2.default,
  forceShowInitials: false,
  heightLimitOneCharacter: 20
};
exports.default = Avatar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9hdmF0YXIvc3JjL0F2YXRhci5qcyJdLCJuYW1lcyI6WyJrZXlzRmlsbEFwcGVhcmFuY2VzIiwiT2JqZWN0Iiwia2V5cyIsImRlZmF1bHQiLCJpbml0aWFsc1Byb3BzIiwidG9wIiwicG9zaXRpb24iLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwibGluZUhlaWdodCIsImdldEluaXRpYWxzRm9udFNpemUiLCJzaXplIiwiaGVpZ2h0TGltaXRPbmVDaGFyYWN0ZXIiLCJNYXRoIiwiY2VpbCIsIkF2YXRhciIsInByb3BzIiwiY29udGV4dCIsImhhbmRsZUVycm9yIiwic2V0U3RhdGUiLCJpbWFnZUhhc0ZhaWxlZExvYWRpbmciLCJzdGF0ZSIsInNyYyIsIm5hbWUiLCJoYXNoIiwiaXNTb2xpZCIsInByb3BzSGFzaFZhbHVlIiwiaGFzaFZhbHVlIiwiZ2V0SW5pdGlhbHMiLCJ1c2VBdXRvQ29sb3IiLCJwcm9wc0FwcGVhcmFuY2UiLCJhcHBlYXJhbmNlIiwiZm9yY2VTaG93SW5pdGlhbHMiLCJpbWFnZVVuYXZhaWxhYmxlIiwiaW5pdGlhbHNGb250U2l6ZSIsImluaXRpYWxzIiwic3Vic3RyaW5nIiwiYXBwZWFyYW5jZUtleSIsInVuZGVmaW5lZCIsImxlbmd0aCIsIm5ldXRyYWwiLCJjb2xvciIsInByb3BUeXBlcyIsIm51bWJlciIsInN0cmluZyIsImZ1bmMiLCJib29sIiwib25lT2YiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7OztBQUNBOzs7Ozs7Ozs7Ozs7OztBQUVBLElBQU1BLHNCQUFzQkMsT0FBT0MsSUFBUCxDQUFZLDhCQUFnQkMsT0FBNUIsQ0FBNUI7O0FBRUEsSUFBTUMsZ0JBQWdCO0FBQ3BCQyxPQUFLLENBRGU7QUFFcEJDLFlBQVUsVUFGVTtBQUdwQkMsV0FBUyxNQUhX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QVMsS0FBS0o7QUFKaEI7QUExQkosT0FERjtBQW9DRDs7Ozs7O0FBaEhrQkgsTSxDQUNaMkIsUyxnQkFDRixhQUFNQSxTO0FBQ1QvQixRQUFNLG9CQUFVZ0MsTTtBQUNoQnBCLFFBQU0sb0JBQVVxQixNO0FBQ2hCO0FBQ0FqQixhQUFXLG9CQUFVaUIsTTtBQUNyQnBCLFFBQU0sb0JBQVVxQixJO0FBQ2hCcEIsV0FBUyxvQkFBVXFCLEk7QUFDbkJmLGNBQVksb0JBQVVnQixLQUFWLENBQWdCaEQsbUJBQWhCLEM7QUFDWjZCLGVBQWEsb0JBQVVpQixJO0FBQ3ZCO0FBQ0E7QUFDQWIscUJBQW1CLG9CQUFVYyxJO0FBQzdCbEMsMkJBQXlCLG9CQUFVK0I7O0FBZGxCNUIsTSxDQWlCWmlDLFksR0FBZTtBQUNwQnJDLFFBQU0sRUFEYztBQUVwQmEsc0JBRm9CO0FBR3BCQyxXQUFTLEtBSFc7QUFJcEJHLG9DQUpvQjtBQUtwQkkscUJBQW1CLEtBTEM7QUFNcEJwQiwyQkFBeUI7QUFOTCxDO2tCQWpCSEcsTSIsImZpbGUiOiJBdmF0YXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJ1xuaW1wb3J0IEJveCBmcm9tICd1aS1ib3gnXG5pbXBvcnQgeyBJbWFnZSB9IGZyb20gJy4uLy4uL2ltYWdlJ1xuaW1wb3J0IHsgVGV4dCB9IGZyb20gJy4uLy4uL3R5cG9ncmFwaHknXG5pbXBvcnQgeyBGaWxsQXBwZWFyYW5jZXMgfSBmcm9tICcuLi8uLi9zaGFyZWQtc3R5bGVzJ1xuaW1wb3J0IHsgY29sb3JzIH0gZnJvbSAnLi4vLi4vY29sb3JzJ1xuaW1wb3J0IGdsb2JhbEdldEluaXRpYWxzIGZyb20gJy4vdXRpbHMvZ2V0SW5pdGlhbHMnXG5pbXBvcnQgZ2xvYmFsSGFzaCBmcm9tICcuL3V0aWxzL2hhc2gnXG5cbmNvbnN0IGtleXNGaWxsQXBwZWFyYW5jZXMgPSBPYmplY3Qua2V5cyhGaWxsQXBwZWFyYW5jZXMuZGVmYXVsdClcblxuY29uc3QgaW5pdGlhbHNQcm9wcyA9IHtcbiAgdG9wOiAwLFxuICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgZGlzcGxheTogJ2ZsZXgnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICBsaW5lSGVpZ2h0OiAxXG59XG5cbmNvbnN0IGdldEluaXRpYWxzRm9udFNpemUgPSAoc2l6ZSwgaGVpZ2h0TGltaXRPbmVDaGFyYWN0ZXIpID0+IHtcbiAgaWYgKHNpemUgPD0gaGVpZ2h0TGltaXRPbmVDaGFyYWN0ZXIpIHtcbiAgICByZXR1cm4gTWF0aC5jZWlsKHNpemUgLyAyLjIpXG4gIH1cbiAgcmV0dXJuIE1hdGguY2VpbChzaXplIC8gMi42KVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBdmF0YXIgZXh0ZW5kcyBQdXJlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAuLi5JbWFnZS5wcm9wVHlwZXMsXG4gICAgc2l6ZTogUHJvcFR5cGVzLm51bWJlcixcbiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIC8vIEhhc2ggdmFsdWUgZGVmYXVsdHMgdG8gbmFtZVxuICAgIGhhc2hWYWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBoYXNoOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBpc1NvbGlkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBhcHBlYXJhbmNlOiBQcm9wVHlwZXMub25lT2Yoa2V5c0ZpbGxBcHBlYXJhbmNlcyksXG4gICAgZ2V0SW5pdGlhbHM6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8vIEluIHNvbWUgY2FzZXMgR3JhdmF0YXIgcmV0dXJucyB0cmFuc3BhcmVudCBwbmdzXG4gICAgLy8gd2Ugc3RpbGwgd2FudCB0byBzZWUgdGhlIGluaXRpYWxzXG4gICAgZm9yY2VTaG93SW5pdGlhbHM6IFByb3BUeXBlcy5ib29sLFxuICAgIGhlaWdodExpbWl0T25lQ2hhcmFjdGVyOiBQcm9wVHlwZXMubnVtYmVyXG4gIH1cblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIHNpemU6IDI0LFxuICAgIGhhc2g6IGdsb2JhbEhhc2gsXG4gICAgaXNTb2xpZDogZmFsc2UsXG4gICAgZ2V0SW5pdGlhbHM6IGdsb2JhbEdldEluaXRpYWxzLFxuICAgIGZvcmNlU2hvd0luaXRpYWxzOiBmYWxzZSxcbiAgICBoZWlnaHRMaW1pdE9uZUNoYXJhY3RlcjogMjBcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KSB7XG4gICAgc3VwZXIocHJvcHMsIGNvbnRleHQpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGltYWdlSGFzRmFpbGVkTG9hZGluZzogZmFsc2VcbiAgICB9XG4gIH1cblxuICBoYW5kbGVFcnJvciA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGltYWdlSGFzRmFpbGVkTG9hZGluZzogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgc3JjLFxuICAgICAgc2l6ZSxcbiAgICAgIG5hbWUsXG4gICAgICBoYXNoLFxuICAgICAgaXNTb2xpZCxcbiAgICAgIGhhc2hWYWx1ZTogcHJvcHNIYXNoVmFsdWUsXG4gICAgICBnZXRJbml0aWFscyxcbiAgICAgIHVzZUF1dG9Db2xvcixcbiAgICAgIGFwcGVhcmFuY2U6IHByb3BzQXBwZWFyYW5jZSxcbiAgICAgIGZvcmNlU2hvd0luaXRpYWxzLFxuICAgICAgaGVpZ2h0TGltaXRPbmVDaGFyYWN0ZXIsXG4gICAgICAuLi5wcm9wc1xuICAgIH0gPSB0aGlzLnByb3BzXG4gICAgY29uc3QgeyBpbWFnZUhhc0ZhaWxlZExvYWRpbmcgfSA9IHRoaXMuc3RhdGVcbiAgICBjb25zdCBpbWFnZVVuYXZhaWxhYmxlID0gIXNyYyB8fCBpbWFnZUhhc0ZhaWxlZExvYWRpbmdcbiAgICBjb25zdCBpbml0aWFsc0ZvbnRTaXplID0gYCR7Z2V0SW5pdGlhbHNGb250U2l6ZShcbiAgICAgIHNpemUsXG4gICAgICBoZWlnaHRMaW1pdE9uZUNoYXJhY3RlclxuICAgICl9cHhgXG5cbiAgICBsZXQgaW5pdGlhbHMgPSBnZXRJbml0aWFscyhuYW1lKVxuICAgIGlmIChzaXplIDw9IGhlaWdodExpbWl0T25lQ2hhcmFjdGVyKSB7XG4gICAgICBpbml0aWFscyA9IGluaXRpYWxzLnN1YnN0cmluZygwLCAxKVxuICAgIH1cblxuICAgIGNvbnN0IGhhc2hWYWx1ZSA9IGhhc2gocHJvcHNIYXNoVmFsdWUgfHwgbmFtZSlcbiAgICBsZXQgYXBwZWFyYW5jZUtleSA9IHByb3BzQXBwZWFyYW5jZVxuICAgIGlmIChhcHBlYXJhbmNlS2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGFwcGVhcmFuY2VLZXkgPVxuICAgICAgICBrZXlzRmlsbEFwcGVhcmFuY2VzW2hhc2hWYWx1ZSAlIGtleXNGaWxsQXBwZWFyYW5jZXMubGVuZ3RoXVxuICAgIH1cblxuICAgIGNvbnN0IGFwcGVhcmFuY2UgPVxuICAgICAgRmlsbEFwcGVhcmFuY2VzW2lzU29saWQgPyAnc29saWQnIDogJ2RlZmF1bHQnXVthcHBlYXJhbmNlS2V5XVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCb3hcbiAgICAgICAgd2lkdGg9e3NpemV9XG4gICAgICAgIGhlaWdodD17c2l6ZX1cbiAgICAgICAgb3ZlcmZsb3c9XCJoaWRkZW5cIlxuICAgICAgICBib3JkZXJSYWRpdXM9ezk5OTl9XG4gICAgICAgIHBvc2l0aW9uPVwicmVsYXRpdmVcIlxuICAgICAgICBkaXNwbGF5PVwiaW5saW5lLWZsZXhcIlxuICAgICAgICBqdXN0aWZ5Q29udGVudD1cImNlbnRlclwiXG4gICAgICAgIGJhY2tncm91bmRDb2xvcj17Y29sb3JzLm5ldXRyYWxbJzMwMCddfVxuICAgICAgICB0aXRsZT17bmFtZX1cbiAgICAgICAgey4uLmFwcGVhcmFuY2V9XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgID5cbiAgICAgICAgeyhpbWFnZVVuYXZhaWxhYmxlIHx8IGZvcmNlU2hvd0luaXRpYWxzKSAmJiAoXG4gICAgICAgICAgPFRleHRcbiAgICAgICAgICAgIGNzcz17aW5pdGlhbHNQcm9wc31cbiAgICAgICAgICAgIGZvbnRTaXplPXtpbml0aWFsc0ZvbnRTaXplfVxuICAgICAgICAgICAgbGluZUhlaWdodD17aW5pdGlhbHNGb250U2l6ZX1cbiAgICAgICAgICAgIHdpZHRoPXtzaXplfVxuICAgICAgICAgICAgaGVpZ2h0PXtzaXplfVxuICAgICAgICAgICAgY29sb3I9e2FwcGVhcmFuY2UuY29sb3J9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2luaXRpYWxzfVxuICAgICAgICAgIDwvVGV4dD5cbiAgICAgICAgKX1cbiAgICAgICAgeyFpbWFnZVVuYXZhaWxhYmxlICYmIChcbiAgICAgICAgICA8SW1hZ2VcbiAgICAgICAgICAgIHdpZHRoPVwiYXV0b1wiXG4gICAgICAgICAgICBoZWlnaHQ9XCIxMDAlXCJcbiAgICAgICAgICAgIHNyYz17c3JjfVxuICAgICAgICAgICAgb25FcnJvcj17dGhpcy5oYW5kbGVFcnJvcn1cbiAgICAgICAgICAvPlxuICAgICAgICApfVxuICAgICAgPC9Cb3g+XG4gICAgKVxuICB9XG59XG4iXX0=
var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import Box from 'ui-box';
import ElevationStyles from './styles/elevation-styles';
import BorderColors from './styles/border-colors';
import LayerAppearances from './styles/layer-appearances';

var ElevationPropType = PropTypes.oneOf(ElevationStyles.map(function (_, index) {
  return index;
}));

var StringAndBoolPropType = PropTypes.oneOfType([PropTypes.string, PropTypes.bool]);

var Pane = function (_PureComponent) {
  _inherits(Pane, _PureComponent);

  function Pane() {
    _classCallCheck(this, Pane);

    return _possibleConstructorReturn(this, (Pane.__proto__ || Object.getPrototypeOf(Pane)).apply(this, arguments));
  }

  _createClass(Pane, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          appearance = _props.appearance,
          elevation = _props.elevation,
          hoverElevation = _props.hoverElevation,
          activeElevation = _props.activeElevation,
          border = _props.border,
          borderTop = _props.borderTop,
          borderRight = _props.borderRight,
          borderBottom = _props.borderBottom,
          borderLeft = _props.borderLeft,
          _props$css = _props.css,
          css = _props$css === undefined ? {} : _props$css,
          props = _objectWithoutProperties(_props, ['appearance', 'elevation', 'hoverElevation', 'activeElevation', 'border', 'borderTop', 'borderRight', 'borderBottom', 'borderLeft', 'css']);

      var appearanceStyle = {};
      if (Object.prototype.hasOwnProperty.call(LayerAppearances, appearance)) {
        appearanceStyle = LayerAppearances[appearance];
      }

      var elevationStyle = void 0;
      if (Number.isInteger(elevation)) {
        elevationStyle = ElevationStyles[elevation];
      }

      var hoverElevationStyle = {};
      if (Number.isInteger(hoverElevation)) {
        hoverElevationStyle = {
          transitionDuration: '150ms',
          transitionProperty: 'box-shadow, transform',
          transitionTimingFunction: 'cubic-bezier(0.0, 0.0, 0.2, 1)',
          ':hover': _extends({}, css[':hover'] || {}, {
            transform: 'translateY(-2px)',
            boxShadow: ElevationStyles[hoverElevation]
          })
        };
      }

      var activeElevationStyle = {};
      if (Number.isInteger(activeElevation)) {
        activeElevationStyle = {
          ':active': _extends({}, css[':active'] || {}, {
            transform: 'translateY(-1px)',
            boxShadow: ElevationStyles[activeElevation]
          })
        };
      }

      var _map = [borderTop, borderRight, borderBottom, borderLeft].map(function (borderSideProperty) {
        if (Object.prototype.hasOwnProperty.call(BorderColors, borderSideProperty)) {
          return '1px solid ' + BorderColors[borderSideProperty];
        } else if (borderSideProperty === true) {
          // Use default, which is now muted, border color when explicitly a true boolean
          return '1px solid ' + BorderColors.muted;
        } else if (Object.prototype.hasOwnProperty.call(BorderColors, border)) {
          return '1px solid ' + BorderColors[border];
        } else if (border === true) {
          return '1px solid ' + BorderColors.muted;
        }

        return borderSideProperty;
      }),
          _map2 = _slicedToArray(_map, 4),
          _borderTop = _map2[0],
          _borderRight = _map2[1],
          _borderBottom = _map2[2],
          _borderLeft = _map2[3];

      return React.createElement(Box, _extends({
        borderTop: _borderTop,
        borderRight: _borderRight,
        borderBottom: _borderBottom,
        borderLeft: _borderLeft,
        boxShadow: elevationStyle
      }, appearanceStyle, {
        css: _extends({}, css, hoverElevationStyle, activeElevationStyle)
      }, props));
    }
  }]);

  return Pane;
}(PureComponent);

Pane.propTypes = _extends({}, Box.propTypes, {

  /**
   * The appearance of the Pane.
   * Values: tint1, tint2, tint3, selected, dark.
   */
  appearance: PropTypes.oneOf(Object.keys(LayerAppearances)),

  /**
   * Elevation of the Pane.
   * Values: 0, 1, 2, 3, 4.
   */
  elevation: ElevationPropType,

  /**
   * Elevation of the Pane on hover. Might get deprecated.
   * Values: 0, 1, 2, 3, 4.
   */
  hoverElevation: ElevationPropType,

  /**
   * Elevation of the Pane on click. Might get deprecated.
   * Values: 0, 1, 2, 3, 4.
   */
  activeElevation: ElevationPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  border: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderTop: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderRight: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderBottom: StringAndBoolPropType,

  /**
   * Can be a explicit border value or a boolean.
   * Values: true, extraMuted, muted, default.
   */
  borderLeft: StringAndBoolPropType
});
export default Pane;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9sYXllcnMvc3JjL1BhbmUuanMiXSwibmFtZXMiOlsiUmVhY3QiLCJQdXJlQ29tcG9uZW50IiwiUHJvcFR5cGVzIiwiQm94IiwiRWxldmF0aW9uU3R5bGVzIiwiQm9yZGVyQ29sb3JzIiwiTGF5ZXJBcHBlYXJhbmNlcyIsIkVsZXZhdGlvblByb3BUeXBlIiwib25lT2YiLCJtYXAiLCJfIiwiaW5kZXgiLCJTdHJpbmdBbmRCb29sUHJvcFR5cGUiLCJvbmVPZlR5cGUiLCJzdHJpbmciLCJib29sIiwiUGFuZSIsInByb3BzIiwiYXBwZWFyYW5jZSIsImVsZXZhdGlvbiIsImhvdmVyRWxldmF0aW9uIiwiYWN0aXZlRWxldmF0aW9uIiwiYm9yZGVyIiwiYm9yZGVyVG9wIiwiYm9yZGVyUmlnaHQiLCJib3JkZXJCb3R0b20iLCJib3JkZXJMZWZ0IiwiY3NzIiwiYXBwZWFyYW5jZVN0eWxlIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiZWxldmF0aW9uU3R5bGUiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJob3ZlckVsZXZhdGlvblN0eWxlIiwidHJhbnNpdGlvbkR1cmF0aW9uIiwidHJhbnNpdGlvblByb3BlcnR5IiwidHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uIiwidHJhbnNmb3JtIiwiYm94U2hhZG93IiwiYWN0aXZlRWxldmF0aW9uU3R5bGUiLCJib3JkZXJTaWRlUHJvcGVydHkiLCJtdXRlZCIsIl9ib3JkZXJUb3AiLCJfYm9yZGVyUmlnaHQiLCJfYm9yZGVyQm90dG9tIiwiX2JvcmRlckxlZnQiLCJwcm9wVHlwZXMiLCJrZXlzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFBLE9BQU9BLEtBQVAsSUFBZ0JDLGFBQWhCLFFBQXFDLE9BQXJDO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixZQUF0QjtBQUNBLE9BQU9DLEdBQVAsTUFBZ0IsUUFBaEI7QUFDQSxPQUFPQyxlQUFQLE1BQTRCLDJCQUE1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QUFDRDs7QUFFRCxlQUFPRCxrQkFBUDtBQUNELE9BcEI4RCxDQXJEeEQ7QUFBQTtBQUFBLFVBcURBRSxVQXJEQTtBQUFBLFVBcURZQyxZQXJEWjtBQUFBLFVBcUQwQkMsYUFyRDFCO0FBQUEsVUFxRHlDQyxXQXJEekM7O0FBMkVQLGFBQ0Usb0JBQUMsR0FBRDtBQUNFLG1CQUFXSCxVQURiO0FBRUUscUJBQWFDLFlBRmY7QUFHRSxzQkFBY0MsYUFIaEI7QUFJRSxvQkFBWUMsV0FKZDtBQUtFLG1CQUFXZjtBQUxiLFNBTU1MLGVBTk47QUFPRSwwQkFDS0QsR0FETCxFQUVLUyxtQkFGTCxFQUdLTSxvQkFITDtBQVBGLFNBWU16QixLQVpOLEVBREY7QUFnQkQ7Ozs7RUF6SitCaEIsYTs7QUFBYmUsSSxDQUNaaUMsUyxnQkFJRjlDLElBQUk4QyxTOztBQUVQOzs7O0FBSUEvQixjQUFZaEIsVUFBVU0sS0FBVixDQUFnQnFCLE9BQU9xQixJQUFQLENBQVk1QyxnQkFBWixDQUFoQixDOztBQUVaOzs7O0FBSUFhLGFBQVdaLGlCOztBQUVYOzs7O0FBSUFhLGtCQUFnQmIsaUI7O0FBRWhCOzs7O0FBSUFjLG1CQUFpQmQsaUI7O0FBRWpCOzs7O0FBSUFlLFVBQVFWLHFCOztBQUVSOzs7O0FBSUFXLGFBQVdYLHFCOztBQUVYOzs7O0FBSUFZLGVBQWFaLHFCOztBQUViOzs7O0FBSUFhLGdCQUFjYixxQjs7QUFFZDs7OztBQUlBYyxjQUFZZDs7ZUEzREtJLEkiLCJmaWxlIjoiUGFuZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQdXJlQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnXG5pbXBvcnQgQm94IGZyb20gJ3VpLWJveCdcbmltcG9ydCBFbGV2YXRpb25TdHlsZXMgZnJvbSAnLi9zdHlsZXMvZWxldmF0aW9uLXN0eWxlcydcbmltcG9ydCBCb3JkZXJDb2xvcnMgZnJvbSAnLi9zdHlsZXMvYm9yZGVyLWNvbG9ycydcbmltcG9ydCBMYXllckFwcGVhcmFuY2VzIGZyb20gJy4vc3R5bGVzL2xheWVyLWFwcGVhcmFuY2VzJ1xuXG5jb25zdCBFbGV2YXRpb25Qcm9wVHlwZSA9IFByb3BUeXBlcy5vbmVPZihcbiAgRWxldmF0aW9uU3R5bGVzLm1hcCgoXywgaW5kZXgpID0+IGluZGV4KVxuKVxuXG5jb25zdCBTdHJpbmdBbmRCb29sUHJvcFR5cGUgPSBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgUHJvcFR5cGVzLnN0cmluZyxcbiAgUHJvcFR5cGVzLmJvb2xcbl0pXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBhbmUgZXh0ZW5kcyBQdXJlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvKipcbiAgICAgKiBDb21wb3NlcyB0aGUgQm94IGNvbXBvbmVudCBhcyB0aGUgYmFzZS5cbiAgICAgKi9cbiAgICAuLi5Cb3gucHJvcFR5cGVzLFxuXG4gICAgLyoqXG4gICAgICogVGhlIGFwcGVhcmFuY2Ugb2YgdGhlIFBhbmUuXG4gICAgICogVmFsdWVzOiB0aW50MSwgdGludDIsIHRpbnQzLCBzZWxlY3RlZCwgZGFyay5cbiAgICAgKi9cbiAgICBhcHBlYXJhbmNlOiBQcm9wVHlwZXMub25lT2YoT2JqZWN0LmtleXMoTGF5ZXJBcHBlYXJhbmNlcykpLFxuXG4gICAgLyoqXG4gICAgICogRWxldmF0aW9uIG9mIHRoZSBQYW5lLlxuICAgICAqIFZhbHVlczogMCwgMSwgMiwgMywgNC5cbiAgICAgKi9cbiAgICBlbGV2YXRpb246IEVsZXZhdGlvblByb3BUeXBlLFxuXG4gICAgLyoqXG4gICAgICogRWxldmF0aW9uIG9mIHRoZSBQYW5lIG9uIGhvdmVyLiBNaWdodCBnZXQgZGVwcmVjYXRlZC5cbiAgICAgKiBWYWx1ZXM6IDAsIDEsIDIsIDMsIDQuXG4gICAgICovXG4gICAgaG92ZXJFbGV2YXRpb246IEVsZXZhdGlvblByb3BUeXBlLFxuXG4gICAgLyoqXG4gICAgICogRWxldmF0aW9uIG9mIHRoZSBQYW5lIG9uIGNsaWNrLiBNaWdodCBnZXQgZGVwcmVjYXRlZC5cbiAgICAgKiBWYWx1ZXM6IDAsIDEsIDIsIDMsIDQuXG4gICAgICovXG4gICAgYWN0aXZlRWxldmF0aW9uOiBFbGV2YXRpb25Qcm9wVHlwZSxcblxuICAgIC8qKlxuICAgICAqIENhbiBiZSBhIGV4cGxpY2l0IGJvcmRlciB2YWx1ZSBvciBhIGJvb2xlYW4uXG4gICAgICogVmFsdWVzOiB0cnVlLCBleHRyYU11dGVkLCBtdXRlZCwgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBib3JkZXI6IFN0cmluZ0FuZEJvb2xQcm9wVHlwZSxcblxuICAgIC8qKlxuICAgICAqIENhbiBiZSBhIGV4cGxpY2l0IGJvcmRlciB2YWx1ZSBvciBhIGJvb2xlYW4uXG4gICAgICogVmFsdWVzOiB0cnVlLCBleHRyYU11dGVkLCBtdXRlZCwgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBib3JkZXJUb3A6IFN0cmluZ0FuZEJvb2xQcm9wVHlwZSxcblxuICAgIC8qKlxuICAgICAqIENhbiBiZSBhIGV4cGxpY2l0IGJvcmRlciB2YWx1ZSBvciBhIGJvb2xlYW4uXG4gICAgICogVmFsdWVzOiB0cnVlLCBleHRyYU11dGVkLCBtdXRlZCwgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBib3JkZXJSaWdodDogU3RyaW5nQW5kQm9vbFByb3BUeXBlLFxuXG4gICAgLyoqXG4gICAgICogQ2FuIGJlIGEgZXhwbGljaXQgYm9yZGVyIHZhbHVlIG9yIGEgYm9vbGVhbi5cbiAgICAgKiBWYWx1ZXM6IHRydWUsIGV4dHJhTXV0ZWQsIG11dGVkLCBkZWZhdWx0LlxuICAgICAqL1xuICAgIGJvcmRlckJvdHRvbTogU3RyaW5nQW5kQm9vbFByb3BUeXBlLFxuXG4gICAgLyoqXG4gICAgICogQ2FuIGJlIGEgZXhwbGljaXQgYm9yZGVyIHZhbHVlIG9yIGEgYm9vbGVhbi5cbiAgICAgKiBWYWx1ZXM6IHRydWUsIGV4dHJhTXV0ZWQsIG11dGVkLCBkZWZhdWx0LlxuICAgICAqL1xuICAgIGJvcmRlckxlZnQ6IFN0cmluZ0FuZEJvb2xQcm9wVHlwZVxuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIGNvbnN0IHtcbiAgICAgIGFwcGVhcmFuY2UsXG5cbiAgICAgIGVsZXZhdGlvbixcbiAgICAgIGhvdmVyRWxldmF0aW9uLFxuICAgICAgYWN0aXZlRWxldmF0aW9uLFxuXG4gICAgICBib3JkZXIsXG4gICAgICBib3JkZXJUb3AsXG4gICAgICBib3JkZXJSaWdodCxcbiAgICAgIGJvcmRlckJvdHRvbSxcbiAgICAgIGJvcmRlckxlZnQsXG5cbiAgICAgIGNzcyA9IHt9LFxuICAgICAgLi4ucHJvcHNcbiAgICB9ID0gdGhpcy5wcm9wc1xuXG4gICAgbGV0IGFwcGVhcmFuY2VTdHlsZSA9IHt9XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChMYXllckFwcGVhcmFuY2VzLCBhcHBlYXJhbmNlKSkge1xuICAgICAgYXBwZWFyYW5jZVN0eWxlID0gTGF5ZXJBcHBlYXJhbmNlc1thcHBlYXJhbmNlXVxuICAgIH1cblxuICAgIGxldCBlbGV2YXRpb25TdHlsZVxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGVsZXZhdGlvbikpIHtcbiAgICAgIGVsZXZhdGlvblN0eWxlID0gRWxldmF0aW9uU3R5bGVzW2VsZXZhdGlvbl1cbiAgICB9XG5cbiAgICBsZXQgaG92ZXJFbGV2YXRpb25TdHlsZSA9IHt9XG4gICAgaWYgKE51bWJlci5pc0ludGVnZXIoaG92ZXJFbGV2YXRpb24pKSB7XG4gICAgICBob3ZlckVsZXZhdGlvblN0eWxlID0ge1xuICAgICAgICB0cmFuc2l0aW9uRHVyYXRpb246ICcxNTBtcycsXG4gICAgICAgIHRyYW5zaXRpb25Qcm9wZXJ0eTogJ2JveC1zaGFkb3csIHRyYW5zZm9ybScsXG4gICAgICAgIHRyYW5zaXRpb25UaW1pbmdGdW5jdGlvbjogYGN1YmljLWJlemllcigwLjAsIDAuMCwgMC4yLCAxKWAsXG4gICAgICAgICc6aG92ZXInOiB7XG4gICAgICAgICAgLi4uKGNzc1snOmhvdmVyJ10gfHwge30pLFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVkoLTJweCknLFxuICAgICAgICAgIGJveFNoYWRvdzogRWxldmF0aW9uU3R5bGVzW2hvdmVyRWxldmF0aW9uXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGFjdGl2ZUVsZXZhdGlvblN0eWxlID0ge31cbiAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcihhY3RpdmVFbGV2YXRpb24pKSB7XG4gICAgICBhY3RpdmVFbGV2YXRpb25TdHlsZSA9IHtcbiAgICAgICAgJzphY3RpdmUnOiB7XG4gICAgICAgICAgLi4uKGNzc1snOmFjdGl2ZSddIHx8IHt9KSxcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKC0xcHgpJyxcbiAgICAgICAgICBib3hTaGFkb3c6IEVsZXZhdGlvblN0eWxlc1thY3RpdmVFbGV2YXRpb25dXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBbX2JvcmRlclRvcCwgX2JvcmRlclJpZ2h0LCBfYm9yZGVyQm90dG9tLCBfYm9yZGVyTGVmdF0gPSBbXG4gICAgICBib3JkZXJUb3AsXG4gICAgICBib3JkZXJSaWdodCxcbiAgICAgIGJvcmRlckJvdHRvbSxcbiAgICAgIGJvcmRlckxlZnRcbiAgICBdLm1hcChib3JkZXJTaWRlUHJvcGVydHkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQm9yZGVyQ29sb3JzLCBib3JkZXJTaWRlUHJvcGVydHkpXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIGAxcHggc29saWQgJHtCb3JkZXJDb2xvcnNbYm9yZGVyU2lkZVByb3BlcnR5XX1gXG4gICAgICB9IGVsc2UgaWYgKGJvcmRlclNpZGVQcm9wZXJ0eSA9PT0gdHJ1ZSkge1xuICAgICAgICAvLyBVc2UgZGVmYXVsdCwgd2hpY2ggaXMgbm93IG11dGVkLCBib3JkZXIgY29sb3Igd2hlbiBleHBsaWNpdGx5IGEgdHJ1ZSBib29sZWFuXG4gICAgICAgIHJldHVybiBgMXB4IHNvbGlkICR7Qm9yZGVyQ29sb3JzLm11dGVkfWBcbiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEJvcmRlckNvbG9ycywgYm9yZGVyKSkge1xuICAgICAgICByZXR1cm4gYDFweCBzb2xpZCAke0JvcmRlckNvbG9yc1tib3JkZXJdfWBcbiAgICAgIH0gZWxzZSBpZiAoYm9yZGVyID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBgMXB4IHNvbGlkICR7Qm9yZGVyQ29sb3JzLm11dGVkfWBcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGJvcmRlclNpZGVQcm9wZXJ0eVxuICAgIH0pXG5cbiAgICByZXR1cm4gKFxuICAgICAgPEJveFxuICAgICAgICBib3JkZXJUb3A9e19ib3JkZXJUb3B9XG4gICAgICAgIGJvcmRlclJpZ2h0PXtfYm9yZGVyUmlnaHR9XG4gICAgICAgIGJvcmRlckJvdHRvbT17X2JvcmRlckJvdHRvbX1cbiAgICAgICAgYm9yZGVyTGVmdD17X2JvcmRlckxlZnR9XG4gICAgICAgIGJveFNoYWRvdz17ZWxldmF0aW9uU3R5bGV9XG4gICAgICAgIHsuLi5hcHBlYXJhbmNlU3R5bGV9XG4gICAgICAgIGNzcz17e1xuICAgICAgICAgIC4uLmNzcyxcbiAgICAgICAgICAuLi5ob3ZlckVsZXZhdGlvblN0eWxlLFxuICAgICAgICAgIC4uLmFjdGl2ZUVsZXZhdGlvblN0eWxlXG4gICAgICAgIH19XG4gICAgICAgIHsuLi5wcm9wc31cbiAgICAgIC8+XG4gICAgKVxuICB9XG59XG4iXX0=
var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }

import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import Box, { spacing, position, layout } from 'ui-box';
import SwitchAppearances from './styles/SwitchAppearances';

var animationEasing = {
  spring: 'cubic-bezier(0.175, 0.885, 0.320, 1.175)'
};

var handleStyle = {
  backgroundColor: '#fff',
  borderRadius: 9999
};

var iconContainerStyle = {
  transition: 'all 500ms ' + animationEasing.spring,
  opacity: 0,
  transform: 'scale(0.0)',
  display: 'flex',
  position: 'absolute',
  alignItems: 'center',
  justifyContent: 'center',
  paddingLeft: 4,
  '&[data-checked="true"]': {
    opacity: 1,
    transform: 'scale(1)'
  }
};

var handleContainerStyle = {
  transition: 'transform 200ms ease-in-out',
  transform: 'translateX(0%)',
  '&[data-checked="true"]': {
    transform: 'translateX(50%)'
  }
};

var CheckIcon = function CheckIcon(_ref) {
  var size = _ref.size,
      _ref$fill = _ref.fill,
      fill = _ref$fill === undefined ? 'currentColor' : _ref$fill,
      props = _objectWithoutProperties(_ref, ['size', 'fill']);

  return React.createElement(
    'svg',
    _extends({ width: 10, height: size, viewBox: '0 0 10 7' }, props),
    React.createElement('path', {
      fill: fill,
      fillRule: 'evenodd',
      d: 'M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z'
    })
  );
};

CheckIcon.propTypes = {
  fill: PropTypes.string,
  size: PropTypes.number
};

var isControlled = function isControlled(component) {
  return {}.hasOwnProperty.call(component.props, 'checked');
};

var Switch = function (_PureComponent) {
  _inherits(Switch, _PureComponent);

  function Switch(props, context) {
    _classCallCheck(this, Switch);

    var _this = _possibleConstructorReturn(this, (Switch.__proto__ || Object.getPrototypeOf(Switch)).call(this, props, context));

    _this.handleChange = function (value) {
      if (isControlled(_this)) {
        _this.props.onChange(value);
      } else {
        _this.setState({
          checked: !_this.state.checked
        });
        _this.props.onChange(value);
      }
    };

    _this.state = {
      checked: props.checked || props.defaultChecked || false
    };
    return _this;
  }

  _createClass(Switch, [{
    key: 'render',
    value: function render() {
      var _props = this.props,
          id = _props.id,
          name = _props.name,
          height = _props.height,
          checkedProps = _props.checked,
          onChange = _props.onChange,
          disabled = _props.disabled,
          appearance = _props.appearance,
          hasCheckIcon = _props.hasCheckIcon,
          defaultChecked = _props.defaultChecked,
          props = _objectWithoutProperties(_props, ['id', 'name', 'height', 'checked', 'onChange', 'disabled', 'appearance', 'hasCheckIcon', 'defaultChecked']);

      var checked = isControlled(this) ? checkedProps : this.state.checked;
      var appearanceStyle = SwitchAppearances[appearance];

      return React.createElement(
        Box,
        _extends({ is: 'label', display: 'block', width: height * 2 }, props),
        React.createElement(Box, {
          is: 'input',
          id: id,
          name: name,
          type: 'checkbox',
          checked: checked,
          disabled: disabled,
          defaultChecked: defaultChecked,
          onChange: this.handleChange,
          css: appearanceStyle
        }),
        React.createElement(
          Box,
          { onClick: this.handleClick, height: height, width: height * 2 },
          React.createElement(
            Box,
            {
              height: height,
              width: height,
              'data-checked': checked,
              css: iconContainerStyle
            },
            hasCheckIcon && React.createElement(CheckIcon, { size: height / 2 - 3 })
          ),
          React.createElement(
            Box,
            {
              width: height * 2,
              display: 'flex',
              'data-checked': checked,
              css: handleContainerStyle
            },
            React.createElement(
              Box,
              { flex: 1, padding: 2 },
              React.createElement(Box, { width: height - 4, height: height - 4, css: handleStyle })
            )
          )
        )
      );
    }
  }]);

  return Switch;
}(PureComponent);

Switch.propTypes = _extends({}, position.propTypes, layout.propTypes, spacing.propTypes, {
  id: PropTypes.string,
  name: PropTypes.string,
  label: PropTypes.node,
  value: PropTypes.string,
  height: PropTypes.number,
  checked: PropTypes.bool,
  onChange: PropTypes.func,
  disabled: PropTypes.bool,
  isInvalid: PropTypes.bool,
  appearance: PropTypes.oneOf(Object.keys(SwitchAppearances)),
  hasCheckIcon: PropTypes.bool,
  defaultChecked: PropTypes.bool
});
Switch.defaultProps = {
  height: 16,
  onChange: function onChange() {},
  appearance: 'default',
  hasCheckIcon: true
};
export default Switch;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zd2l0Y2gvc3JjL1N3aXRjaC5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJQcm9wVHlwZXMiLCJCb3giLCJzcGFjaW5nIiwicG9zaXRpb24iLCJsYXlvdXQiLCJTd2l0Y2hBcHBlYXJhbmNlcyIsImFuaW1hdGlvbkVhc2luZyIsInNwcmluZyIsImhhbmRsZVN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwiYm9yZGVyUmFkaXVzIiwiaWNvbkNvbnRhaW5lclN0eWxlIiwidHJhbnNpdGlvbiIsIm9wYWNpdHkiLCJ0cmFuc2Zvcm0iLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwicGFkZGluZ0xlZnQiLCJoYW5kbGVDb250YWluZXJTdHlsZSIsIkNoZWNrSWNvbiIsInNpemUiLCJmaWxsIiwicHJvcHMiLCJwcm9wVHlwZXMiLCJzdHJpbmciLCJudW1iZXIiLCJpc0NvbnRyb2xsZWQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJjb21wb25lbnQiLCJTd2l0Y2giLCJjb250ZXh0IiwiaGFuZGxlQ2hhbmdlIiwib25DaGFuZ2UiLCJ2YWx1ZSIsInNldFN0YXRlIiwiY2hlY2tlZCIsInN0YXRlIiwiZGVmYXVsdENoZWNrZWQiLCJpZCIsIm5hbWUiLCJoZWlnaHQiLCJjaGVja2VkUHJvcHMiLCJkaXNhYmxlZCIsImFwcGVhcmFuY2UiLCJoYXNDaGVja0ljb24iLCJhcHBlYXJhbmNlU3R5bGUiLCJoYW5kbGVDbGljayIsImxhYmVsIiwibm9kZSIsImJvb2wiLCJmdW5jIiwiaXNJbnZhbGlkIiwib25lT2YiLCJPYmplY3QiLCJrZXlzIiwiZGVmYXVsdFByb3BzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxPQUFPQSxLQUFQLElBQWdCQyxhQUFoQixRQUFxQyxPQUFyQztBQUNBLE9BQU9DLFNBQVAsTUFBc0IsWUFBdEI7QUFDQSxPQUFPQyxHQUFQLElBQWNDLE9BQWQsRUFBdUJDLFFB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QUFDakJmLFNBQU9uQyxVQUFVeUIsTTtBQUNqQmlCLFVBQVExQyxVQUFVMEIsTTtBQUNsQlcsV0FBU3JDLFVBQVVtRCxJO0FBQ25CakIsWUFBVWxDLFVBQVVvRCxJO0FBQ3BCUixZQUFVNUMsVUFBVW1ELEk7QUFDcEJFLGFBQVdyRCxVQUFVbUQsSTtBQUNyQk4sY0FBWTdDLFVBQVVzRCxLQUFWLENBQWdCQyxPQUFPQyxJQUFQLENBQVluRCxpQkFBWixDQUFoQixDO0FBQ1p5QyxnQkFBYzlDLFVBQVVtRCxJO0FBQ3hCWixrQkFBZ0J2QyxVQUFVbUQ7O0FBaEJUcEIsTSxDQW1CWjBCLFksR0FBZTtBQUNwQmYsVUFBUSxFQURZO0FBRXBCUixZQUFVLG9CQUFNLENBQUUsQ0FGRTtBQUdwQlcsY0FBWSxTQUhRO0FBSXBCQyxnQkFBYztBQUpNLEM7ZUFuQkhmLE0iLCJmaWxlIjoiU3dpdGNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcbmltcG9ydCBCb3gsIHsgc3BhY2luZywgcG9zaXRpb24sIGxheW91dCB9IGZyb20gJ3VpLWJveCdcbmltcG9ydCBTd2l0Y2hBcHBlYXJhbmNlcyBmcm9tICcuL3N0eWxlcy9Td2l0Y2hBcHBlYXJhbmNlcydcblxuY29uc3QgYW5pbWF0aW9uRWFzaW5nID0ge1xuICBzcHJpbmc6IGBjdWJpYy1iZXppZXIoMC4xNzUsIDAuODg1LCAwLjMyMCwgMS4xNzUpYFxufVxuXG5jb25zdCBoYW5kbGVTdHlsZSA9IHtcbiAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicsXG4gIGJvcmRlclJhZGl1czogOTk5OVxufVxuXG5jb25zdCBpY29uQ29udGFpbmVyU3R5bGUgPSB7XG4gIHRyYW5zaXRpb246IGBhbGwgNTAwbXMgJHthbmltYXRpb25FYXNpbmcuc3ByaW5nfWAsXG4gIG9wYWNpdHk6IDAsXG4gIHRyYW5zZm9ybTogJ3NjYWxlKDAuMCknLFxuICBkaXNwbGF5OiAnZmxleCcsXG4gIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICBwYWRkaW5nTGVmdDogNCxcbiAgJyZbZGF0YS1jaGVja2VkPVwidHJ1ZVwiXSc6IHtcbiAgICBvcGFjaXR5OiAxLFxuICAgIHRyYW5zZm9ybTogJ3NjYWxlKDEpJ1xuICB9XG59XG5cbmNvbnN0IGhhbmRsZUNvbnRhaW5lclN0eWxlID0ge1xuICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIDIwMG1zIGVhc2UtaW4tb3V0JyxcbiAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgwJSknLFxuICAnJltkYXRhLWNoZWNrZWQ9XCJ0cnVlXCJdJzoge1xuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoNTAlKSdcbiAgfVxufVxuXG5jb25zdCBDaGVja0ljb24gPSAoeyBzaXplLCBmaWxsID0gJ2N1cnJlbnRDb2xvcicsIC4uLnByb3BzIH0pID0+IChcbiAgPHN2ZyB3aWR0aD17MTB9IGhlaWdodD17c2l6ZX0gdmlld0JveD1cIjAgMCAxMCA3XCIgey4uLnByb3BzfT5cbiAgICA8cGF0aFxuICAgICAgZmlsbD17ZmlsbH1cbiAgICAgIGZpbGxSdWxlPVwiZXZlbm9kZFwiXG4gICAgICBkPVwiTTQgNC41ODZMMS43MDcgMi4yOTNBMSAxIDAgMSAwIC4yOTMgMy43MDdsMyAzYS45OTcuOTk3IDAgMCAwIDEuNDE0IDBsNS01QTEgMSAwIDEgMCA4LjI5My4yOTNMNCA0LjU4NnpcIlxuICAgIC8+XG4gIDwvc3ZnPlxuKVxuXG5DaGVja0ljb24ucHJvcFR5cGVzID0ge1xuICBmaWxsOiBQcm9wVHlwZXMuc3RyaW5nLFxuICBzaXplOiBQcm9wVHlwZXMubnVtYmVyXG59XG5cbmNvbnN0IGlzQ29udHJvbGxlZCA9IGNvbXBvbmVudCA9PiB7XG4gIHJldHVybiB7fS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNvbXBvbmVudC5wcm9wcywgJ2NoZWNrZWQnKVxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTd2l0Y2ggZXh0ZW5kcyBQdXJlQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAuLi5wb3NpdGlvbi5wcm9wVHlwZXMsXG4gICAgLi4ubGF5b3V0LnByb3BUeXBlcyxcbiAgICAuLi5zcGFjaW5nLnByb3BUeXBlcyxcbiAgICBpZDogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBuYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIGxhYmVsOiBQcm9wVHlwZXMubm9kZSxcbiAgICB2YWx1ZTogUHJvcFR5cGVzLnN0cmluZyxcbiAgICBoZWlnaHQ6IFByb3BUeXBlcy5udW1iZXIsXG4gICAgY2hlY2tlZDogUHJvcFR5cGVzLmJvb2wsXG4gICAgb25DaGFuZ2U6IFByb3BUeXBlcy5mdW5jLFxuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcbiAgICBpc0ludmFsaWQ6IFByb3BUeXBlcy5ib29sLFxuICAgIGFwcGVhcmFuY2U6IFByb3BUeXBlcy5vbmVPZihPYmplY3Qua2V5cyhTd2l0Y2hBcHBlYXJhbmNlcykpLFxuICAgIGhhc0NoZWNrSWNvbjogUHJvcFR5cGVzLmJvb2wsXG4gICAgZGVmYXVsdENoZWNrZWQ6IFByb3BUeXBlcy5ib29sXG4gIH1cblxuICBzdGF0aWMgZGVmYXVsdFByb3BzID0ge1xuICAgIGhlaWdodDogMTYsXG4gICAgb25DaGFuZ2U6ICgpID0+IHt9LFxuICAgIGFwcGVhcmFuY2U6ICdkZWZhdWx0JyxcbiAgICBoYXNDaGVja0ljb246IHRydWVcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3BzLCBjb250ZXh0KSB7XG4gICAgc3VwZXIocHJvcHMsIGNvbnRleHQpXG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNoZWNrZWQ6IHByb3BzLmNoZWNrZWQgfHwgcHJvcHMuZGVmYXVsdENoZWNrZWQgfHwgZmFsc2VcbiAgICB9XG4gIH1cblxuICBoYW5kbGVDaGFuZ2UgPSB2YWx1ZSA9PiB7XG4gICAgaWYgKGlzQ29udHJvbGxlZCh0aGlzKSkge1xuICAgICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh2YWx1ZSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGNoZWNrZWQ6ICF0aGlzLnN0YXRlLmNoZWNrZWRcbiAgICAgIH0pXG4gICAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHZhbHVlKVxuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7XG4gICAgICBpZCxcbiAgICAgIG5hbWUsXG4gICAgICBoZWlnaHQsXG4gICAgICBjaGVja2VkOiBjaGVja2VkUHJvcHMsXG4gICAgICBvbkNoYW5nZSxcbiAgICAgIGRpc2FibGVkLFxuICAgICAgYXBwZWFyYW5jZSxcbiAgICAgIGhhc0NoZWNrSWNvbixcbiAgICAgIGRlZmF1bHRDaGVja2VkLFxuICAgICAgLi4ucHJvcHNcbiAgICB9ID0gdGhpcy5wcm9wc1xuICAgIGNvbnN0IGNoZWNrZWQgPSBpc0NvbnRyb2xsZWQodGhpcykgPyBjaGVja2VkUHJvcHMgOiB0aGlzLnN0YXRlLmNoZWNrZWRcbiAgICBjb25zdCBhcHBlYXJhbmNlU3R5bGUgPSBTd2l0Y2hBcHBlYXJhbmNlc1thcHBlYXJhbmNlXVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCb3ggaXM9XCJsYWJlbFwiIGRpc3BsYXk9XCJibG9ja1wiIHdpZHRoPXtoZWlnaHQgKiAyfSB7Li4ucHJvcHN9PlxuICAgICAgICA8Qm94XG4gICAgICAgICAgaXM9XCJpbnB1dFwiXG4gICAgICAgICAgaWQ9e2lkfVxuICAgICAgICAgIG5hbWU9e25hbWV9XG4gICAgICAgICAgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICBjaGVja2VkPXtjaGVja2VkfVxuICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICBkZWZhdWx0Q2hlY2tlZD17ZGVmYXVsdENoZWNrZWR9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ2hhbmdlfVxuICAgICAgICAgIGNzcz17YXBwZWFyYW5jZVN0eWxlfVxuICAgICAgICAvPlxuICAgICAgICA8Qm94IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9IGhlaWdodD17aGVpZ2h0fSB3aWR0aD17aGVpZ2h0ICogMn0+XG4gICAgICAgICAgPEJveFxuICAgICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgICB3aWR0aD17aGVpZ2h0fVxuICAgICAgICAgICAgZGF0YS1jaGVja2VkPXtjaGVja2VkfVxuICAgICAgICAgICAgY3NzPXtpY29uQ29udGFpbmVyU3R5bGV9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge2hhc0NoZWNrSWNvbiAmJiA8Q2hlY2tJY29uIHNpemU9e2hlaWdodCAvIDIgLSAzfSAvPn1cbiAgICAgICAgICA8L0JveD5cbiAgICAgICAgICA8Qm94XG4gICAgICAgICAgICB3aWR0aD17aGVpZ2h0ICogMn1cbiAgICAgICAgICAgIGRpc3BsYXk9XCJmbGV4XCJcbiAgICAgICAgICAgIGRhdGEtY2hlY2tlZD17Y2hlY2tlZH1cbiAgICAgICAgICAgIGNzcz17aGFuZGxlQ29udGFpbmVyU3R5bGV9XG4gICAgICAgICAgPlxuICAgICAgICAgICAgPEJveCBmbGV4PXsxfSBwYWRkaW5nPXsyfT5cbiAgICAgICAgICAgICAgPEJveCB3aWR0aD17aGVpZ2h0IC0gNH0gaGVpZ2h0PXtoZWlnaHQgLSA0fSBjc3M9e2hhbmRsZVN0eWxlfSAvPlxuICAgICAgICAgICAgPC9Cb3g+XG4gICAgICAgICAgPC9Cb3g+XG4gICAgICAgIDwvQm94PlxuICAgICAgPC9Cb3g+XG4gICAgKVxuICB9XG59XG4iXX0=